Ene-2016
Se intengra funcion de inventarios.
Se integra boostrap (CSS).
Se modifica base de datos para almacenar precio en biblio_copy_new_form.
Se modifican relacionados con biblio_copy. (form, clases e isntall (falta probar)
Se corrigen errore menores en header_TOP
Se encuentra un bug en searhc (añ select por author)
Se comienza a integrar traduccion Italiano, Polaco, ingles. (Falta revisar todo)

nov-2015
Se integra busqueda por palabras claves
Se mejora la generacion de etiquetaS reportes

jun-2015
Se compune el yaz
se compreyba qe hay que hay que instalar las funcones en el servidor.
Se agrega funcion yazTest.php
se requiere setsebool httpd_can_network_connect=1


Se eliminan los cierres de php en todos los archivos por falla de encabezado.

mar-2015
-En biblio uoload subir copias desde CSV se agrego opcion de estado de materiales.
-En Consultar Biblioteca del Congreso USA, se Agrego campo limitador de maximo de registros a buscar.
#fix, pendiente - al momento de usar un registro cambia la codificacion y afecta acentos y ñ

-Se crea modulo en cataloging, para listar los campos MARC

-Se corrigio bug al momento de borrar el campos MARC
    Fatal error: Call to undefined method BiblioFieldQuery::delete() in /var/www/html/espa33/catalog/biblio_marc_del.php on line 31

Se pone selecion de todos los checkbox en bulk_delete.php (borrado por lotes de bibliogradia)
Se reviso importacion de bibliografia por lotes.
  #Fix hay que modificarla para que genere pruebas previas y acepte mas campos que los 
    $required_header = array('isbn', 'author', 'title', 'title_remainder', 'responsibility_stmt', 'call_nmbr1', 'call_nmbr2', 'publication_place', 'publisher_name', 'publication_date');
	     $header = array('020a', '100a',    '245a', '245b',             '245c',               '050a',       '050b',              '260a',          '260b',              '260c'      );

Se modifica el search.php generando una copia que no muestra las portadas (hay que renombrar archivos
    segun se requiera con imagenes o sin imagenes 
biblio_search.php---sIN FOTOS y biblio_search.php (con fotos de portada)

feb-2015
Correcion de fix en z5390, 
Mejora de busqueda CDD y CDU
Correccion de ruta en creditos, changelog, licencia
Se modifica funcion de MARC para que muestre campos que no existen en las tablas MYSQL y no marque error
Se modifica biblioview.php para que no marque error en caso no estar definido el autor
Se cambio funcin split por explode en uploadmarc.php para que no marque warnig.
Se modifico la funcion printUsmarcText para transferir $tab y mostrar solo campos marc en modo admin.
Se agrego archivo de ejemplo para upload marc

sep -2014 jalg
	se modifican materiales digitales, para poder almacenar en servidro como local host y en servidores diferentes, para implelmnetar el uso de la nube
	Se corrige falla se Zotero
	Se corrigen fallas menores en traducciones de /shared /admin /catalog

jul-2014 jalg
	Se corrige bug de warnig para version php 5.5 en modulo d eopenurl zotero
	se crea carpeta zotero

Abril jalg
	coreccion de bug en busqueda vanzada al cambiar de pagina pierde filtro

mar 2014 jalg
	Correcion del bug de busqueda avanzada.

1.-  En la búsqueda avanzada, cuando se combina "Autor" con "Año" (solos o con otros campos), da el siguiente error:
	Database Query Error - You've Probably Found a Bug
	Database query failed (1054)
	Please give all the information on this page to your support personnel.

	Query SELECT COUNT(DISTINCT(biblio.bibid)) AS rowcount FROM biblio LEFT JOIN biblio_field ON biblio_field.bibid=biblio.bibid WHERE biblio.title LIKE '%Appling%' AND (biblio.author LIKE '%c%' OR 	biblio.responsibility_stmt LIKE '%c%' OR (biblio_field.tag='700' AND (biblio_field.subfield_cd='a' OR biblio_field.subfield_cd='b') AND biblio_field.field_data LIKE '%c%')) OR 	(biblio_field.tag='260' AND biblio_field.subfield_cd='c' AND biblio_field.field_data='1995') GROUP BY biblio.bibid HAVING COUNT(biblio.bibid) > 1 AND opac_flg = 'Y' failed. The DBMS said this:

	Unknown column 'opac_flg' in 'having clause'

	se modifico el archivo 
	classes/BiblioSearchQuery.php
---

enero 2014 jalg
	Se integra funcion de busqueda de imagenes  a partir d eun servidor externo, 
	  echo "http://covers.openlibrary.org/b/isbn/" . $LbiblioFlds['020a']->getFieldData() . "-M.jpg";
	pero falla 
	no encontre funcion para usar con if en caso de no existir

Dic 2013 jalg
	-Se modifica instalacion revisando los upgrade para openbiblio 6.X y 7.X, Hotri.
	-Se integra un nuevo importador CVS para bibliografias. falta depurar el anterior.
	-Se modifica admin para integrar member.
	-Se modifica Circ, prestamos integrando varios campos de interes.
	-Se crea Pestaña user y se modifica opac, para que los member puedan revisar sus estatus y solicitar apartados.
	-Se modica biblio search para mostrar titulo rmante o subtitulo
	Se corrge falla de DM-QUERY
	-Se modifica para la visualizacion de paginas de resutados multiples, limitando a 5 en lugar de 21 en member y biblio_search
	-Se modifica para la visualizacion de paginas de resutados multiples, se agrega ir a la priemera y ultima pagina en member y biblio_search
	-Se agrega reporte list o general, lista toda la bibliografia, sin importar si se tiene copias de ellos.
	espabiblio otra version 3.3
10/jul/2013

	Se modifica el 
	shared/biblio_search.php
	shared/biblio_view.php
	  para aislar las busquedas de autor, ya que nos envian de OPAC a Admisntrador, asi como tambien las otras referencias bibliograficas.
	    Ahora si es opac nos manda a opac y si se es adminstrador nos manda a administrador.

23/ago/2013
	    Se traducen al español los campos MARC (Por GERMANA)
		/locale/es/GB/domain/
		  usmarc_block_dm.sql
		  usmarc_indicator_dm.sql
		  usmarc_subfield_dm.sql
		  usmarc_tag_dm.sql

25//ago/2013
    se modifica /shared/csv_export.php
		para aue respalde las tablas de  CDU, CDD, IBIC, autores
-------

http://bibliotecapinamar.org/
------------------
Si tiene problemas de visualización de esta sección puede ver en formato plano el archivo en ../doc/ChangeLog

Sobre la nomenclatura de la versión que usted ve en este momento.
seria la ---- 0.7.2 ---- Pero como openbiblio puede generar otra versión 7.2 y
o la  espabiblio otra version 3.0
a estas modificaciones las denominare GiordanoBruno 3.0
(Jose Antonio Lara Galindo joanlaga@hotmail.com)

procure documentar cada uno los cambios integrados por el Equipo Giordano Bruno, en los archivos.

En general esta es una versión de la Openbiblio Ver 6.0 y 6.1, Opendream/Hotri, Espabiblio 2.0 y alguna funciones encontradas o pedidas en el camino.
-----------------
Mar-2013
Se integran Examinadores de Catalogos CDD, CDU, IBIC
Falta discrinar tablas, aumentar Registros y Desarrollar las ayudas de los mismos.
--------------
Corregido bug
Non-static method Fatal::dbError() should not be called statically, assuming $this from incompatible context in ../openbiblio/classes/Query.php on line 68
----------
Actualizodo el wordpress
WordPress 3.4.1. 

se incluye modulo opac

y salida de resultados de busquedas opac
________________

phpinfo.php 24/feb/2013
se modifica, pàra evitar que lo ejecuten personas no autorizadas, asi como integrar el entorno del espabiblio. 
-----------
administrador de traducciones 24/feb/2013
Se implementa funcion de administracion DE TRADUCCION 	para poder mejorar las traducciones desde la adminstracion.
----------

Reportes.

Falta revisar traduccion.

Catalogación
Adquisición
Búsqueda de copia
Títulos duplicados

circulación (préstamo)
  Búsqueda de Miembros
  Historial de Artículos Pedidos
  Lista de artículos pendientes de devolución por los socios
  Lista de socios con artículos pendientes de devolución
  Listado de bibliografía prestada
  Mantener las peticiones de préstamo que contienen información de contacto con el socio
Estadísticas
  Bibliografías más populares
  Los autores más populares
  Período a mostrar

Resumen a granel [Bulk summary]
  Importación fallida
  Artículos sin portada

-------------------
Se agrega en navar y navtab
el opac, para comodidad de nuevos usarios.

Se agrega función de Translate (mejora el locale al no requerir php). Falta depurar


Adecuada actualización desde tablas de versiones anteriores de openbiblio a espabiblio 3.0 GiordanoBruno

* Tablas normalizadas a utf8
* Archivos php normalizados a codificación utf8 (para evitar caracteres raros en ñ's y acentos)
_________

* Se agrega capacidad de mostrar icono de la pestaña del explorador
	/shared/header_top.php
	// JALG, sE AGREGA LINEA PARA QUE APAREZCA LA IMAGEN EN LA PESTAÑA DEL EXPLORADOR, CAMBIAR FAVICON.ICO EN LA rAIZ
	echo "<link href='../favicon.ico' rel='icon' type='image/x-icon'/>";

	/shared/header_opac.php
	<!-- **************************************************************************************
	* JALG, sE AGREGA LINEA PARA QUE APAREZCA LA IMAGEN EN LA PESTAÑA DEL EXPLORADOR, CAMBIAR FAVICON.ICO EN LA rAIZ
	     **************************************************************************************-->
	<link href='../favicon.ico' rel='icon' type='image/x-icon'/>

	/install/header_install.php
	<link href='../favicon.ico' rel='icon' type='image/x-icon'/>

________________________________

* Se integran nuevas referencias de servidor z53.90 (42 en total falta probar y depurar)
mas Servidores Z39.50 falta probar

* se modifican los Navar originales de look............

Bug encontrado en el formato de servidores, no funciona el botón se usar servidor
Se corrio modificando la classe
____________

* Mejorados los help.
* Locale español compatible con version Openbiblio 7.0, 7.1 7.2 espabiblio 2.0 y 3.0

* Se agrega carpeta /doc y se mueven ahí documentos de interés y colección de manuales (falta revisarlos y actualizarlos)
___________________

* Add funcion de fotos de miembros.
*Se añade función para subir fotos de member en circ

/CLASSES (2 ARCHIVOS)
MEMBER.PHP
MEMBERqUERY.PHP

se modifica la tabla member poniendo "foto" después de "email"
se requiere la carpeta
 /fotos/lectores

SE MODIFICAN:
/CIR/
CSV_TEMPLATE.CSV (FALTA PROBAR) -SE AGREGA Descriptor "FOTO"

mbr_edit.php
mbr_edit_FORM.php
mbr_FIELDS.php
mbr_NEW.php
mbr_VIEW.php

\locale\
en\circulation.php
eS\circulation.php

pENDIENT EPOR REVISAR Y AGREGAR EN:
en\HELP\circulation.php
eS\HELP\circulation.php

se modico la tabla
instal/sql/member.sql
locale/es/sample/member.sql

Falta reducir tamaño AL SUBIR FOTO.
fALT APONER ADVERTENCIAS EN EL LLENADO DE FOTO.
___________________________

*Se añade función para imprimir carnet de member en cir

Se agrega Fichero,
circ/mbr_print_carnet.php


falta probar y generar help y varios formatos amigables  y  falta agregarlo como reporte.
_____________________

*Se añade función Upload Offline Circulation
falta probar y generar help
_____________

* Media-State-Menu added in menu Admin.
*Se añade función para status de materiales en admin
________________________
*Se añade función para personalización de campos marc de las bibliografía

Custom Copy Fields /admin
phpinfo.php  /admin

Falta Probar y generar help
________________________

en home se modifica el menú
Licencia
Créditos
Leeme
Historial de Cambios (ChangeLog)
Consulta status por el usuario

---------------
* Add Loc USR para búsquedas del congreso otro método (sirve para pruebas) y no requiere prerequisitos YAZ.
	se agregan archivos locsru, ya que en espa funcionan bien, pero solo buscan en la biblioteca del congreso.
se añade función de búsquedas en el congreso de U.S.A. sin servirdor yaz /admin
Consultar Biblioteca del Congreso USA /en catalog

------------------
Para aceptar aceptar archivos digitales. y funcione como biblioteca Digital
SE MODIFICAN LOS ARCHIVOS:
Biblio_edit.php
biblio_field.php
input_func.php
biblio_new.php

requiere carpeta con permisos de escritura 
media/digitales/

se modifican campos de tabla marc (903a y 256a, 902a, 902b 902c)
usmarc_block_dm.sql
usmarc_indicator_dm.sql
usmarc_subfield_dm.sql
usmarc_tag_dm.sql
------------------------
* Add funcion de fotos autores.

---- 0.7.2 ---- Pendintes por revisar e implementar

(Jose A. Lara Galindo joanlaga@hotmail.com)

* Modificada función de fotos portadas para mostras imagen por defualt.
* Add campos para valor de google analycts.
* Add campos para valor de google Index.
* Se borran e integran sentencias SQL. *Loop*.sql en el proceso de instalación.
Pendientes y bug
      classes/Dm.php Los mensajes de error no estan con locale.
_______________
Se modifico materials_list.php, para poder modificas estados de materiales.
se gregan 
matstat_del.php
matstat_del_confirm.php
matstat_edit_form.php
matstat_new.php
matstat_new_form.php
matstate_edit.php
_________________________
en admin/export-impotat se modifica el exportador para integrar todas las tablas en el proceso de exportación.

Corrección de fallo en boton de selec en Admin/Edit/servidores

modificado locale para mexico
shared/read_settings.php
//jalg modificado para español mexico
  } elseif ($set->getLocale()=="es") {
    obib_setlocale(LC_MONETARY,'es_MX ISO-8859-1', 'es', 'es_MX', 'es');
    obib_setlocale(LC_NUMERIC,'es_MX ISO-8859-1', 'es', 'es_MX', 'es');
//jalg modificado para español mexico


-- se agrega dirección de la biblioteca en el encabezado


cambio en las generación de tablas archivos .sql
TYPE=MyISAM
por
ENGINE=MyISAM


esto con el fin de actualizar una instrucción de SQL para indicar el motor MyISAM (la tecnología de almacenamiento de datos usada por defecto por el sistema administrador de bases de datos relacionales MySQL) que está obsoleta para las versiones superiores a 5.5 de MySQL.

---
Se normalizan tablas a utf-8

------
afredado para evitar mensage warnig de Warning: date() [function.date]: It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning,
/sared/global_constants.php

date_default_timezone_set('America/Mexico_City');//jalg

--------
___________________________

To: castgu@msn.com
Gustavo Castillo

Realizado modificaciones CIRC2 la cual permite que un usuario de la biblioteca pueda
	ver por internet que materiales tiene prestados 
	cuales son sus multas. 
	Tambíen puede realizar reservas de materiales que no estén disponibles en la biblioteca. 
	existen alguna validaciones tales como: 
Cuando se consulta por ejemplo un afiliado de la biblioteca no se permite que el código del afiliado este en blanco o el nombre del afiliado este en blanco, esto es con el objetivo de que si la base de datos de usuarios es muy grande no traiga todos los registros. Ya que esto ocasiona una demora mientras hace la carga. 

Se agrega carpeta y archivos se modifican para versión 7.2 y normaliza a codificación a utf8
/circ2
/shared/header_mislibros.php
/shared/header_top2.php
/shared/hold_del2.php
/shared/hold_del_confirm2.php
/locale/es/circulation2.php
/navbars/circulation2.php

se modifican:
home/hindex.php
natvar/home.php

Reducir y poner función cir2 en navber y poner help y lic créditos y phome
 _____Pendiente agregar pass de usuario codificado para mayor discrecional, probar y depurar

---- 0.7.1 ----
* Additional fix SF bug 1162251/BB bug 3
* Automatic barcode generation also for Edit Copy
* Validation for Copy Barcode Number optional, remove conversion to lowercase
* Update Help
* Add Revise Page link to Help navigation, integrates with project wiki
* New default media label layout, paper size Letter
* Optimize dimensions and spacing for label Avery L7674
* Add label Demco Multi-purp 1 1/2" x 29/32"
* Add new layouts for media labels and member cards
* Add parameters to Popular Bibliographies, moved to Statistics category
* Add parameters Adress/Phone/Email to Member Search
* Add new reports
* Add Call Number search
* Fix issue 41 - author search finds multiple copies with identical barcodes
* Fix issue 42 - author search: incomplete results
* Subject search: add biblio_field join
* Title search: add Remainder of title
* Add Keyword search
* query speed: word boundaries for short words in biblio_field join criteria
* query speed: remove count query, use sql_calc_found_rows
* Fix issue 29 - Mistake in regular expression
* Fix issue 29 - Mistake in regular expression
* Fix issue 45 - Date class returns 00-00-0000 for illegal dates
* Fix issue 46 - Ambiguous dates cause unexpected results
* Date format in header unambiguous
* Fix issue 16 - Deprecated set_magic_quotes_runtime
* Fix issue 36 - MySQL 5.5 -> TYPE Deprecation
* Fix issue 26, 27, 48 (incomplete delete checkout privileges, custom fields)
* Fix issue 50 - Check In: incorrect time, PHP warnings
* Fix issue 51, until 2038 - Date class: timestamp outside valid range
* Fix issue 31 - Problem in adding a similar book
* Fix issue 53 - Barcode lookup fails [0.7.0: Make biblio_search redirect to biblio_view on single search result]
* Installer checks for issue 15
* Fix issue 54 (partial)- $late is not always a whole number
* Fix issue 17 - Check in of books
* Fix issue 55 - Checkout History purge rules missing
* Add note for Purge Bibliography History setting
* Fix issue 22 - Place hold impossible if copy is On Hold
* Fix issue 56 - Days Due Back silently truncated to 255 days
* Suppress error_reporting E_STRICT (fixes reports for PHP 5.4)
* Fix issue 59 - Field settings.locale too small
* Fix issue 60 - Currency symbol for default OpenBiblio locale depends on operating system
* Fix issue 61 - htmlspecialchars returns empty string instead of currency symbol and amount
* Fix issue 57 - Install always claims to be successful
* Fix issue 52 - Upload Marc Data: Function split() is deprecated
* Deprecated: get_magic_quotes_runtime
* htmlspecialchars returns empty string
* PHP 5.4 htmlspecialchars needs to know character set
* Fix issue 19 (partial) - Convert single byte UTF-8 characters for reports system
* Automatic database upgrade for renewal patch / versions from openbiblio.de
* Upload Marc Data 'Show in OPAC' default Yes - proposal from Issue 63
* Search: exclude nonpublic for opac
* Migrate release process to Mercurial

---- 0.7.0 ----
* Add the ability to override due date on checkout.
* Add item history view and report.
* On checking in an item, show the name of the member who had it out.

---- 0.7.0 ----Revisar si estan implementadas en sta version jalg pendientes
* Add the ability to override checkout dates.
* Add a list-of-barcodes parameter to copy search.
* Add offline circulation support.
* Fix a number of small bugs
* Add custom copy fields
* Add the ability to renew all a member's checkouts at once
* Fix SF bug 1162251/BB bug 3
* Relaxed alphanumeric restriction on barcodes

---- 0.6.1 ----
* Import missing classes/Search.php
* Fix some whitespace problems in Rpt
* Fix a few compatibility problems with PHP 4.2
* Work around a bug in some versions of IE that requires
  downloaded PDFs to come from an URL with '.pdf'
  in the 'filename'.

---- 0.6.0 ----
* Track create_dt for copies
* Add iterators and the Iter class
* New Query class using Iters
* New sidebar navigation code
* New reports system
* Improve selenium tests
* Make release scripts prune empty directories

---- 0.5.2 ----
* Allow user-specified member classes with individual checkout privileges
* Show per-material type custom MARC fields on view/edit pages
* User-defined custom fields on member records
* Integrate new, more robust install/upgrade system
* Add some help files contributed by Hans van der Weij
* Fix short_open_tags bugs
* Allow days due back to have more than 2 digits
* Make holds expire after user-specified maximum days
* Add automatic barcode generation, thanks to Hans van der Weij
* Improve error detection and handling
* Add renewal functionality
* Fix a large number of escaping bugs
* Make author search look in field 700 as well as 100
* Fix MySQL 4.1+ password encryption incompatibility
* Use default currency symbols if none defined in locale
* Fix a number of interface spelling errors
* Make mbrid and bibid linking in report displays work for tables besides biblio and member
* Improve international address support by having a single, multiline address field
* Fix timeout errors by sending users to tab index after login
* Hack around system locale name differences for en and de locales
* Fix local file include vulnerabilities in shared/header.php and shared/help.php
* Fix join syntax for newer MySQL compatibility
* Fix bug 1082970
* Import Selenium functional tests

---- 0.5.1 ----
* Base from which this change log starts

	  
----------------------------  lookupReleaseNotes.txt ---------------------------

issues -----------------------------------------------------------------------

- response to non-existant isbn is BAD.  Needs improvement ASAP.
- auto collection needs more categories.

2009-09-08 v2.09 -----------------------------------------------------------------
- fixed several bugs reported by users - Thanks for the inputs.

2009-08-07 v2.08 -----------------------------------------------------------------
- corrected name of jQuery library to jquery.js fon non-windows systems.

2009-06-15 v2.07 -----------------------------------------------------------------
- fixed broken 'keepDashes' function (would not remove if unset).

2009-06-14 v2.06 -----------------------------------------------------------------
- removed annoying 'null' from host list.
- OPAC flag set as default is now working correctly.
- now respects default collection set in DB, but how to set is undetermined!
- added licensing object to customHead.php as 'lookup' object available to all

2009-06-13 v2.05 -----------------------------------------------------------------
- added provision for custom navigation items with out modifying openbiblio files.
- added provision for custom Javascript & CSS with out modifying openbiblio files.
- fixed several bugs that got missed in prior releases.
- caught up most the 'minor' openBiblio coding standards for eventual incorporation
	like: use of REL for includes, copyright notices, coding consistencies.

2009-06-11 v2.04 -----------------------------------------------------------------
- removed references in install instructions to older versions.
- major re-write in many areas; display code now in HTML/CSS/JavaScript files.
- added 'Lookup Settings' screen to Admin tab for most configuration options.
- added 'Lookup Hosts' screen to Admin tab for host info maintenance.
- moved all lookup files into own new directory '.../openbiblio/lookup2'
- incorporated SRU protocall as an option to YAZ based on Dec2006 work of Ritteh.
	use of YAZ is now optional.
- improved usability by making use of AJAX technology. JavaScript is now required.
- changes to Author or Title by user will result in new Cutter if 'AutoDewey' in effect.
- now possible to backup from a choice on a multi-hit list without haveing to do
	a new search - all data is retained at the browser.

2008-04-13 -----------------------------------------------------------------------
- patch from MAB to deal with cases of author in various combinations of 100a & 700a.

2007-07-10 -----------------------------------------------------------------------
- added support for UDC in auto call-numbers as requested by Josep M Solé.
- fixed bug in dash removal code
- Failure now returns new search screen rather than in incorrectly filled form

2007-05-16 -----------------------------------------------------------------------
- added conf file option to not remove dashes from entered ISBN

2007-03-11 -----------------------------------------------------------------------
- modified to work with v0.6.0
- minor change in installation sequence
- update of YAZ references.

2006-12-08 -----------------------------------------------------------------------
- modified ISBN handler to strip extraneous text at end of some Z3950 generated ISBNs
- added a few patches to improve handling of the multi-host, multi-hit cases

2006-10-31 -----------------------------------------------------------------------
- added type '979' to bar code test per info from Cristoph Lange
- improved code for multiple libraries per suggestions from Hans van der Weij

2006-10-10 -----------------------------------------------------------------------
- fixed bug in prior release that prevented it from displaying any search results
- clarified installation notes for auto 'new copy'

2006-09-01 -----------------------------------------------------------------------
- bar-code reading fixed, including better diagnostic messages
- multi-repository search now available via config file settings
- name of repository library included in multi-hit responses

2006-03-17 -----------------------------------------------------------------------
- now requires release v0.51-pre4 or later
- now handles correctly multiple hits with user selection having multiple ISBN

2005-07-11 -----------------------------------------------------------------------
- lookup-install now mentions the lookup.js file

2005-07-05 -----------------------------------------------------------------------
- moved Lookup to own form shown in nav bar. 
- lookup now uses localization functions for all displayed text
- added "Z39.50 search" to .../navbars/cataloging.php & .../locale/en/navbars.php
- added text for all displayed text to .../locale/en/cataloging.php
- moved z3950 search code to new file .../catalog/lookup_z3950_search.php
- increased number of Z3950 search criteria from 2 to 5
- added Publication data as search criteria

2005-06-26 -----------------------------------------------------------------------
- YAZ activtion instructions expanded in lookup_install.txt.

2005-05-25 -----------------------------------------------------------------------
- ISBN now verified if input from a barcode scanner
- fixed mis-handling of "not found" when 2 search criteria are specified
- added missing "{" in installation instructions.
- "keyword anywhere" choice added to 2nd search criteria

2005-04-17 -----------------------------------------------------------------------
- new single-button selection of multiple hit choice

2005-04-15 -----------------------------------------------------------------------
- support functions broken out into seperate file 'lookup_func.php'
- simple, crude, auto-collection mechanism, sets colection to 'Fiction' based on LC codes
- Cutter-Sanborn cutter mechanism modified to work with mySQL ver older than 4.1
- short titles (e.g. "The Source") now generate a correct cutter sufix (e.g. "s")
- auto-dewey function now considers LC classes "PR..PZ", and dewey class "[FIC]" as fiction

2005-04-08 -----------------------------------------------------------------------
- tested OK with PHP 4.1.10; does not work with 5.03, or 4.0.x
- added Cutter-Sanborn 3-digit table option for auto-cutter (made it default choice)
- user configuration section moved to "lookup_conf.php"
- auto-dewey works from both 'PS' & 'PZ' LoC call numbers
- lookup-install file renamed to lookup_install
- this file renamed from "lookup-releaseNotes.txt"
- max Hits Displayed made a user choice
- fixed bug in ISBN validity check introduced in prior release

2005-03-24 -----------------------------------------------------------------------
- created a seperate installation file, but left old information in this file
- sample copies of modified openbiblio files no longer provided in .zip file
- fix cutter suffix bug when noise word occurs as first word of title
- fix default dewey call number bug

2005-03-23 -----------------------------------------------------------------------
- improve parsing of dewey call numbers to assure xxx/.xx/xx forms retain the first 
  group of digits after the '.', but loose the preceding '/'
- show number of hits if more than one
- allow user to specify which word of a title is to be used in cutter
- cutter generation defaulted to off
- call number generation defaulted to off

2005-03-22 -----------------------------------------------------------------------
- tested to work with version 0.51, and Firefox 1.0
- improved interface for multiple hits.  Formatted output from which ISBN or LCCN
  can be copied and pasted directly into a new search. For Ivan's case below, you 
  will have to do the second search using the LCCN number.
- added optional internal cutter generator for dewey call numbers (per LOC rules)
- added optional user assigned default dewey call number for LOC 'PZ' books 

2005-03-03 -----------------------------------------------------------------------
- make provisions for a user specified id and password for the search server
- query format changed to allow for multiple search criteria "similar to US LOC"
- User may specify up to 2 criteria (such as Author & title) (crude display)
- crude display of multiple hits, user can then copy ISBN, LCCN, etc and back up to 
  original query

2005-02-13 -----------------------------------------------------------------------
- correct few syntax errors 

2004-12-25 -----------------------------------------------------------------------
- fix validator to allow ISSN and LCCN.
- fix validator to allow bar code scanner input of ISBN.
- modify "nothing found! to display code searched for.

2004-12-20 -----------------------------------------------------------------------
- add process to cleanup ISSN ('-' now allowed, but not required.)
- validate ISBN on entry before sending form to MARC server. This prevents having a 
  lookup failure due to a typing error appear as if no database entry exists.
- as an interim solution to the multiple hit problem, all hits will be posted to all 
  tag fields.  This usually results in duplicates of most values, but at least nothing
  is lost or hidden.  If you have a better display idea, please let me know.  To see 
  the effect on a known case, try ISBN "188-127-3156", which was provided by Ivan.

2004-09-21 -----------------------------------------------------------------------
- fixed bug in lookup regarding hit counter.

- To have focus in lookup so it appears in lookup value field as it did in ver 0.4,
  You should modify biblio_new_form.php to the following:
  $tab = "cataloging";
  $nav = "new";
  $helpPage = "biblioEdit";
  $cancelLocation = "../catalog/index.php";

	if (!isset($HTTP_GET_VARS["lookupVal"]) && !isset($HTTP_GET_VARS["srchBy"])) 
		$focus_form_name = "lookupform";
		$focus_form_field = "lookupVal";
	} else {
		$focus_form_name = "newbiblioform";
		$focus_form_field = "materialCd";
	}

  require_once("../shared/read_settings.php");
  require_once("../functions/inputFuncs.php");

2004-07-11 -----------------------------------------------------------------------
- code modified to work with ver 0.5

2004-04-04 -----------------------------------------------------------------------
- Use of '-' in ISBN or LCCN now allowed, but not required.
- Removed leading '; ' from 1st additional author.
- Added note asking that lookup value be saved in the event of multiple hits.  A test
	case is needed to write code to handle this frequent problem.
- Major simplification of "extract_marc_fields()" function using generic code for all 
	MARC fields except 538(Systems Details Note) & 650(Topical Term).  538 is not
	normally handled by OpenBiblio at all, and 650 data is handled outside of MARC.

- if you would like to have the "new copy" form automatically appear when finished
	adding new bibliographic data, change the end of "biblio_new.php" to read:
  
  #**************************************************************************
  #*  Must select one of the following lines
  #**************************************************************************
  //following line requires manual access to new copy form (original function)
  //header("Location: ../shared/biblio_view.php?bibid=".$bibid."&msg=".$msg);
  //following line auto transfers to new copy form (new function)
  header("Location: ../catalog/biblio_copy_new_form.php?bibid=".$bibid."&msg=".$msg);
  exit();
 
2003-08-11 -----------------------------------------------------------------------
- Added 'my_call_nmbr_type' variable to top of lookup.php to allow user to select 
	which of LoC, Dewey, or local call numbers are to be placed into the Call_Nmbr1,2,3 fields.
	Thanks to Richard June for the idea.
- Corrected the Z3950 search_by attribute for LCCN to be '9'.  Thanks to A.J. Gatlin.
- Added handler for tag 538a at popular request. (Matt & Richard)
- Temporarily disabled for() loop for handling multiple records since it performed no
	useful function as written.  Also commented out residual <dl></dl> pair

2003-08-04 -----------------------------------------------------------------------
Code has been thoroughly tested with 0.40.  I have added some 30 books using
this version, perhaps 10 of those using a cuecat bar code reader to enter the 
ISBN from the book jacket or inside cover.

Be sure to follow the recommendations at the bottom of this document regarding
session_data and implementing YAZ in your PHP.

Fixed a problem when the remote server provides 2 or more LoC Call numbers for
a single book.  They are now seperated by '; '.

Now supports 'Additional authors' if you change biblio_fields.php as follows:
  <?php printUsmarcInputText(100,"a",TRUE,$fieldIds,$postVars,$pageErrors,$marcTags, $marcSubflds, FALSE,OBIB_TEXT_CNTRL);?>

  <?php // added for additional authors (fl) ?>
  <?php printUsmarcInputText(700,"a",FALSE,$fieldIds,$postVars,$pageErrors,$marcTags, $marcSubflds, FALSE,OBIB_TEXT_CNTRL);?>

  <?php printUsmarcInputText(650,"a",FALSE,$fieldIds,$postVars,$pageErrors,$marcTags, $marcSubflds, FALSE,OBIB_TEXT_CNTRL);?>
  
I found it convenient to change the content of the description column of the 
usmarc_subfield_dm table for row 100a to be "Personal name - Author".  I also changed 
the description for row 700a to "Personal name - additional author".

Changed the 'extract_marc_fields()' function to use a switch / case statement in place 
of the long set of if statements.

All documntation comments use the '#' form.  '//' is used only for disabling 
development debug statements.  All of these may be removed if you prefer.

You should modify biblio_new_form.php to the following:
  $helpPage = "biblioEdit";
  $cancelLocation = "../catalog/index.php";

		if (empty($lookupVal) || empty($srchBy)) { ##<<<<<<<<<<<<<<<<<<<<< 
			$focus_form_name = "lookupform";
			$focus_form_field = "lookupVal";
		} else {
			$focus_form_name = "newbiblioform";
			$focus_form_field = "materialCd";
		}

  require_once("../shared/read_settings.php");
  require_once("../functions/inputFuncs.php");

Made several other small changes I have forgotten.

2003-07-06 ----------------------------------------------------------------------- 
The tested code is for version 0.30 of OpenBiblio.
I have included a modified version of the php code for 0.4 prepared by Matt Boytim
even though I have not tried it myself.  Also included is an add-on he suggests to 
move the web page focus to the ISBN entry line.

2002-9-18 -----------------------------------------------------------------------
1. $ removed from prices
2. multiple entries now properly seperated by ';'
3. '00' removed from isbn
4. bar code now filled only with LC control number
5. leading spaces removed from LC cntl number
6. remove title choice from form, reformat and add notes
7. remove some unused code

Known Problems 9-18:
none at this time

===============================================================================
All of the following refers to the 0.30 version.

This is an addon to OpenBiblio that allows you to do a search of a Z3950 
catalog with auto posting of the resulting MARC data to the 'new bibliography' 
page. It's admitidly crude, being my first php effort. This code is an embelishment
of the examples shown at: www.indexdata.dk/phpyaz/. 

This module allows you to specify isbn, lccn or title for the search and the 
value to search for. The input form (all 3 lines of it is placed just above 
the current new_biblio form. Output is directly to the normal input fields 
to allow user verification and editing before submission. Provission is made 
in the code (marked as #<<<<<<<<<<<<<<<<<<<<<<<)to display the actual MARC 
formatted lines, but that is currently disabled by '//' marks. 

In my experience, this search only works for books published since about
1972.  I would guess that US lib of Congress has decided not add isbn or LCCN 
searches to the z3950 server for anything older than that.  For older
books I use 'title + author' using the advanced search at
www.loc.gov/z3950/.

I've added some 1000+ books to my catalog using this code and it definately works 
for me using the Lib of Congress voyager server. Another server could be
easily substituted. Just search for the following and substitute the
server of choice.  

	$host = 	'z3950.loc.gov:7090';
	$database = 	'voyager';

A list of servers can be found at www.loc.gov/z3950/

The mod to openBiblio involves adding this single line to biblio_new_form.php 
just above the existing <form ... > statement near the end of the file. 

<?php include("../catalog/lookup.php");?> 

Then of course you add the lookup.php file to the indicated directory. Thats it! 
(Assuming you have YAZ installed in your php installation.)

While, all may go perfectly for you the first time, I found it useful to make a few
additions to biblio_new.php. Locate the '!validData' string as shown below, and insert
the new lines beginning with 'echo' as shown.

  $validData = $biblio->validateData();
  if (!$validData) {
    echo 'Validation failed!' . '<br>'; #<<<<<<<<<<<<<<<<<<<<<<<<
    echo 'one or more of the following has an invalid character:' . '<br>'; #<<<
    echo '  isbn = ' . $HTTP_POST_VARS["isbnNmbr"] . '<br>'; #<<<<<<<<<<<<<<<<<<
    echo '  bar Code = ' . $HTTP_POST_VARS["barcodeNmbr"] . '<br>'; #<<<<<<<<<<<
    echo '  title = ' . $HTTP_POST_VARS["title"] . '<br>'; #<<<<<<<<<<<<<<<<<<<<
    echo '  call Nmbr = ' . $HTTP_POST_VARS["callNmbr"] . '<br>'; #<<<<<<<<<<<<<
    echo '  price = ' . $HTTP_POST_VARS["price"] . '<br>'; #<<<<<<<<<<<<<<<<<<<<
    echo 'please correct the invalid entries and try again.' . '<br>'; #<<<<<<<<
    $pageErrors["barcodeNmbr"] = $biblio->getBarcodeNmbrError();
    $pageErrors["title"] = $biblio->getTitleError();
    $pageErrors["callNmbr"] = $biblio->getCallNmbrError();
    $pageErrors["price"] = $biblio->getPriceError();
    $HTTP_SESSION_VARS["postVars"] = $HTTP_POST_VARS;
    $HTTP_SESSION_VARS["pageErrors"] = $pageErrors;
    header("Location: ../catalog/biblio_new_form.php");
    exit();
  }

Then when I do get some incorrect data into the data entry form, I can see what 
caused the problem.


Note: if you are using windows, check that your installation of php created a 
'.../php/sessionData' dir.  OpenBiblio will require it to run correctly.

My installation of php (4.23 for Windows 2000) came with YAZ already
installed. All I needed to do was to move the accompanying yaz.dll to
my c:\winnt\system32 dir. The indexdata page can help with linux/unix
systems.


Fred LaPlante
flaplante@flos-inc.com

------------------------mbr_fields.php
2005-03-02 -----------------------------------------------------------------
- applied bug fix supplied by Marcus that occured when editing a member

2004-04-04 -----------------------------------------------------------------
- new member screen now starts with next available id number in place.
	This assumes that numbers are assigned in order by PC.
	requires new copies of these files:
	...\circ\mbr_fields.php
	...\classes\member_query.php



----------------------------  lookupReleaseNotes.txt ---------------------------
